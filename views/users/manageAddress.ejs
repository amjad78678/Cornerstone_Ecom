<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Male_Fashion Template">
    <meta name="keywords" content="Male_Fashion, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <title>Cornerstone</title>

    <link rel="shortcut icon" type="image/x-icon" href="assets/user/img/theme/menswear.png" />
    <!-- Google -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&display=swap"
    rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <!-- Css Styles -->
    <link rel="stylesheet" href="assets/user/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="assets/user/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="assets/user/css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="assets/user/css/magnific-popup.css" type="text/css">
    <link rel="stylesheet" href="assets/user/css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="assets/user/css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="assets/user/css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="assets/user/css/style.css" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="path/to/magnify.css">
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/userHome.css" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/skins/skin-demo-2.css" />
    <link rel="stylesheet" href="assets/css/demos/demo-2.css" />
    <link rel="stylesheet" href="/userHome.css" />
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
<!-- Bootstrap JS Bundle (Bootstrap JS + Popper.js) -->
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
  crossorigin="anonymous"
></script>

    <link
  rel="stylesheet"
  href="assets/css/plugins/owl-carousel/owl.carousel.css"
/>
<link
  rel="stylesheet"
  href="assets/css/plugins/magnific-popup/magnific-popup.css"
/>
<link rel="stylesheet" href="assets/css/plugins/jquery.countdown.css" />
<link
  rel="stylesheet"
  href="assets/vendor/line-awesome/line-awesome/line-awesome/css/line-awesome.min.css"
/>


<!-- Favicon -->
<link
  rel="apple-touch-icon"
  sizes="180x180"
  href="assets/images/icons/apple-touch-icon.png"
/>
<link
  rel="icon"
  type="image/png"
  sizes="32x32"
  href="assets/images/icons/favicon-32x32.png"
/>
<link
  rel="icon"
  type="image/png"
  sizes="16x16"
  href="assets/images/icons/favicon-16x16.png"
/>
<link rel="manifest" href="assets/images/icons/site.html" />
<link
  rel="mask-icon"
  href="assets/images/icons/safari-pinned-tab.svg"
  color="#666666"
/>
<link rel="shortcut icon" href="assets/images/icons/favicon.ico" />
<script src="https://kit.fontawesome.com/c0b612fc07.js" crossorigin="anonymous"></script>




</head>

<body>


<nav class="navbar navbar-expand-lg navbar-light bg-light p-4">
   <img class="imgLogo"
          width="250rem"
          height="250rem"
          src="https://imgs.search.brave.com/IS3ECAw-N7V5vfLuJOPJQwYn0zPRLDKKDI5LT2JFpxU/rs:fit:860:0:0/g:ce/aHR0cHM6Ly93d3cu/Y3NvZGJyYW5kLmNv/bS93cC1jb250ZW50/L3VwbG9hZHMvMjAy/MS8xMC9Db3JuZXJz/dG9uZS1Mb2dvLUhv/cml6b250YWwucG5n"
          alt=""
        />
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav ml-auto ms-auto">
      <li class="nav-item active">
        <a class="nav-link mr-4 text-dark" href="/">Home<span class="sr-only">(current)</span></a>
        
      </li>
      <li class="nav-item">
       <a class="nav-link mr-4 text-dark" <% if(locals.user){ %>
                href="/productList">
            <% }else{ %>
              href="/productList">
              
              <% } %>Shop</a>
      </li>
       <li class="nav-item active">
               <a class="nav-link mr-3 text-dark" href="/aboutUs">About Us</a>
        
      </li>
         <li class="nav-item active">
               <a class="nav-link mr-3 text-dark" href="/contactUs">Contact Us </a>
        
      </li>
         <li class="nav-item active">
                       <a class="nav-link mr-3 text-dark" href="/cart "><%   if(locals.user){  %>
            
            
            <i class="fas fa-shopping-cart"></i>
            
            <% } %></a>
        
      </li>
         <li class="nav-item active">
            <a href=""><i class="nav-link fa fa-heart" style="margin-top: 6px;" aria-hidden="true"></i></a>
        
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
           <% if (locals.user) { %>
    <%= user.userName.toUpperCase() %>
  <% } %>
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          
          <a class="dropdown-item" <% if(locals.user) { %> 
                    href="/userProfile">
                <% }else{ %>
                 href="/userSignIn">
                  <% } %>
               
                <% if(locals.user){ %>
                   My profile

               <%  }else{%>
                  Login

              <%   }%>
              </a>
      
          <div class="dropdown-divider"></div>
         <a class="dropdown-item" <% if(locals.user) {%> 
                   href="/userLogout">
                <% }else{ %>
                    href="/userRegister">
                  <% } %>
                <% if(locals.user){ %>
                   Logout

               <%  }else{%> 
                  Sign Up

              <%   }%>
              </a>
        </div>
      </li>
   
    </ul>
 
  </div>
</nav>  








    
  <div class="page-wrapper">
  <!--Header start-->




<!-- Header Section End -->
    <section class="breadcrumb-option">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="breadcrumb__text">
              <h4>Shop</h4>
              <div class="breadcrumb__links">
                <a href="/">Home</a>
                <a href="/userProfile">Profile</a>
                <span>Manage Addresses</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>


    <section style="background-color: #f8f8f8; padding: 50px 0">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <div class="card shadow">
              <div class="card-body">
                <h5 class="card-title text-primary">Manage Address</h5>
                <ul class="list-group list-group-flush">
                  <%  addresses.forEach((userAddress)=>{ %>
                    <li id="deleteLi" class="list-group-item">
                      <div class="row align-items-center">
                        <div class="col-sm-9">
                          <p class="mb-1">
                            <strong class="text-dark">Name:</strong>
                            <%= userAddress.name %>
                          </p>
                          <p class="mb-1">
                            <strong class="text-dark">House Name:</strong>
                            <%= userAddress.street_address %>
                          </p>
                          <p class="mb-1">
                            <strong class="text-dark">City:</strong>
                            <%= userAddress.city %>
                          </p>
                          <p class="mb-1">
                            <strong class="text-dark">State:</strong>
                            <%= userAddress.state %>
                          </p>
                          <p class="mb-1">
                            <strong class="text-dark">Phone:</strong>
                            <%= userAddress.phone %>
                          </p>
                          <p class="mb-1">
                            <strong class="text-dark">PIN Code:</strong>
                            <%= userAddress.pincode %>
                          </p>
                        </div>
                        <div class="col-sm-2 text-right">
                          <div class="btn-group ">
                            <a  href="/editAddress?userId=<%= user._id %>&addressId=<%= userAddress._id %>" class="btn-md btn-primary p-3">
                              <i class="fas fa-edit"></i>
                            </a>
                            <a href="#" onclick="handleDeleteAddress('<%=userAddress._id%>')" class="btn-md btn-danger p-3 ">
                              <i class="fas fa-trash"></i>
                            </a>
                          </div>
                        </div>
                      </div>
                    </li>
                    <% }) %>
                    
                </ul>

                <div class="text-center mt-4">
                  <a href="/profileNewAddress" class="btn btn-primary btn-sm">Add Address</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

<%- include('./layouts/footerNavbar.ejs')  %>

<!-- Search End -->

<script src="assets/user/js/jquery-3.3.1.min.js"></script>
<script src="assets/user/js/bootstrap.min.js"></script>
<script src="assets/user/js/jquery.nice-select.min.js"></script>
<script src="assets/user/js/jquery.nicescroll.min.js"></script>
<script src="assets/user/js/jquery.magnific-popup.min.js"></script>
<script src="assets/user/js/jquery.countdown.min.js"></script>
<script src="assets/user/js/jquery.slicknav.js"></script>
<script src="assets/user/js/mixitup.min.js"></script>
<script src="assets/user/js/owl.carousel.min.js"></script>
<script src="assets/user/js/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>


<script src="path/to/magnify.js"></script>
<script src="/admin/js/vendors/bootstrap.bundle.min.js"></script>
 
</body>

</html>




<script>
const handleDeleteAddress=async(addressId)=> {

     try {
      event.preventDefault();
      console.log('started');
   
      // Display the confirmation message
      Swal.fire({
            title: "Remove Address",
            text: "Are you sure you want to remove this address?",
            icon: "warning",
            showCancelButton: true, // This property is used to display the "Cancel" button
            confirmButtonText: "OK",
            cancelButtonText: "Cancel",
            dangerMode: true,
      }).then(async (willDelete) => {
        if (willDelete.isConfirmed) {
          // User clicked "OK" button, perform the delete action
          const response = await axios.put('/deleteAddress', { addressId });

          if (response.data.success) {
            // Remove the deleted element from the DOM
            const elementToRemove = document.getElementById('deleteLi');
            elementToRemove.parentNode.removeChild(elementToRemove);
          }
        }
      });
    } catch (error) {
      console.log(error.message);
    }
  };
                    



</script>